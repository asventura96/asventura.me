datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id           String @id @default(cuid())
  username     String @unique
  email        String @unique
  name         String?
  passwordHash String
}

model profile {
  id Int @id @default(1)

  /// Nome completo (Ex: "André Ventura")
  name  String
  /// Título profissional (Ex: "Desenvolvedor Full Stack")
  title String

  // Contato
  email    String?
  phone    String?
  location String?

  // Redes Sociais
  linkedin_url String?
  github_url   String?
  website_url  String?

  // Pessoal
  birthdate      DateTime? @db.Date
  marital_status String?

  // Textos Longos
  /// "Sobre mim" / "Carta de Apresentação"
  personal_summary        String? @db.Text
  /// "Objetivos Profissionais"
  professional_objectives String? @db.Text
  photo_url               String?
}

model skills {
  id   Int    @id @default(autoincrement())
  name String
  /// Descrição detalhada da competência.
  description String @db.Text
  /// Categoria para agrupamento (Ex: "Back-end", "Front-end", "Ferramenta")
  category    String
  // Controla se a skill aparece na seção "Competências" do perfil público
  showOnProfile Boolean @default(false)
  // Relação com Cursos
  cursos SkillsEmCursos[]
}

model experiences {
  id          Int     @id @default(autoincrement())
  company     String
  role        String
  /// Descrição das atividades e responsabilidades.
  description String  @db.Text
  location    String?
  start_date  String?
  end_date    String?
  /// Verdadeiro se for o emprego atual.
  is_current  Boolean @default(false)
  salary      String?
  exit_reason String?

  /// Campo legado. Não utilizar.
  period String
}

model Education {
  id   Int    @id @default(autoincrement())
  /// Ex: "PUC Minas"
  institution String
  /// Nível (Ex: "Graduação", "Pós-Graduação")
  level       String
  /// Nome do Curso (Ex: "Engenharia de Software")
  course_name String
  /// Data de início (Ex: "08/2021")
  start_date  String
  /// Data de término (Ex: "09/2026")
  end_date    String?
  /// Status (Ex: "Cursando", "Concluído", "Trancado")
  status      String
  description String? @db.Text
}

model Course {
  id Int @id @default(autoincrement())

  /// Nome do curso ou certificação
  name        String
  /// Tipo (Ex: "Curso", "Certificação")
  type        String
  institution String
  /// Data de conclusão (Ex: "10/2025")
  date        String
  /// Carga-horária em horas
  workload    Int?

  /// Competências adquiridas
  skills_acquired String? @db.Text
  /// URL do certificado
  url             String?
  /// Observações adicionais
  notes           String? @db.Text
  // Relação com Cursos
  skills SkillsEmCursos[]
}

model Language {
  id Int @id @default(autoincrement())

  name  String
  /// Nível (Ex: "Básico", "Intermediário", "Avançado", "Nativo")
  level String
}

model SkillsEmCursos {
  curso   Course @relation(fields: [cursoId], references: [id], onDelete: Cascade)
  cursoId Int
  
  skill   skills @relation(fields: [skillId], references: [id], onDelete: Cascade)
  skillId Int

  @@id([cursoId, skillId])
}